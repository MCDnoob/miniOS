# 调试工具

```C
__asm__ volatile("xchgw %bx, %bx")
DEBUGK();
```
一个汇编断点以及一个打印工具。

在`debug.h`中声明：
```C
void debugk(char *file, int line, const char *fmt, ...);

#define BMB __asm__ volatile("xchgw %bx, %bx") // bochs magic breakpoint
#define DEBUGK(fmt, args...) debugk(__BASE_FILE__, __LINE__, fmt, ##args)
```
注意这个宏`DEBUGK(fmt, args...)`里面的`args...`与C函数里面的可变参数不一样，这个表示`fmt`之后的参数全都在`args`里面，后面的`##args`就是为了照顾这个，如果用`DEBUGK`没有传入可变参数，那么会多余一个`,`，##args就会吃掉这个逗号让编译正常通过。若传入可变参数，##args就会与前面的都好正常传参。